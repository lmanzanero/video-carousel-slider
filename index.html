<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<!-- <link href="/YTPlayer.css" media="all" rel="stylesheet" type="text/css"> -->
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script> 
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
 
</script>
<style>
  body,h1,h2,h3,h4,h5,h6 {font-family: "Raleway", sans-serif}
body, html {
    height: 100%;
    line-height: 1.8;
}

 
/* Full height image header */
.bgimg-1 {
    background-position: center;
    background-size: cover;
    /* background-image: url("https://www.hd-wallpapersdownload.com/script/bulk-upload/taking-wildlife-photos-hd-wallpaper.jpg"); */
    min-height: 100%;
}
.w3-bar .w3-button {
    padding: 16px;
}

 
 
#myNavbar {
  height: 35px;
}
#myNavbar a {
  padding-top: 5px;
}

#img01 {
  position: absolute; 
  margin: 0 auto;
  top: 0;
  left: 0;
  width: 100%;
  height: 500px;
}
 
.w3-button:hover{
	background-color: #FF725B !important;
	color: #ffffff !important;
  box-shadow: 0 5px 23px rgba(102,102,102,.2) !important; 
}
.more-btn{
  border-radius: 1000px;
	border: 2px solid #77CDF1;
	color: #77CDF1;
	cursor: pointer;
	display: inline-block;
	font-size: 1.125rem;
	text-decoration: none;
	font-weight: 600;
	line-height: 1.6rem;  
	padding: .8em 2.2em;
	position: relative; 
  left: 45%;
	text-align: center;
	text-transform: uppercase;
	transition: all .3s;
}

.more-btn:hover {  
	background-color: #FF725B;
	color: #ffffff;
  box-shadow: 0 5px 23px rgba(102,102,102,.2); 
}

  body {
    position: relative;
    margin: 0;
    padding: 0;
  }
   #video-container {
    background: #000;
  position: fixed;
  top: 0; right: 0; bottom: 0; left: 0;
  z-index: -99;
    /* position: relative;
	padding-bottom: 50%; 
	padding-top: 25px;
	height: 0; */
  }
#video-container iframe {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
	/* top: 0;
	left: 0;
	width: 100%;
	height: 100%; */
}  
  .controllers {
    position: fixed; 
    display: flex;
    flex-direction: row;
    flex-wrap: wrap;
    justify-content: center;
    width: 100%;
    height: 40px;
    background-color: rgba(34, 33, 33, 0.1);
    align-content: center;
    text-align: center;
    z-index: 3000;
    left: 0;
    bottom: 0;
  }
  .controllers .control {
    opacity: 0.3;
  }
   .controllers .control:hover {
    opacity: 1;
  }
  
  .controllers:hover{
    background-color: rgba(34, 33, 33, 0.4);
  }
  .controllers .control {
    width: 50px;
    background: cadetblue;
    margin: 5px;
    padding: 5px;
    border-radius: 4px;
  }
  .controllers .control:hover {
    background-color: cyan; 
  }
  .video-carousel {
    position: fixed;
    display: block;
    overflow-x: scroll;
    overflow-y: hidden;
    white-space: nowrap;
    padding: 5px 10px 5px 10px;
    z-index: 3000; 
    left: 4.5%;
    bottom: 7%;
    width:90%;
    height: 95px;
    background-color: rgba(34, 33, 33, 0.4);
    -webkit-overflow-scrolling: touch;
  } 
  .video-carousel::-webkit-scrollbar-track
{
	-webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3);
	border-radius: 10px;
	background-color: rgb(150, 148, 148);
}
.video-carousel::-webkit-scrollbar
{
	width: 5px;
  height: 7px;
	background-color: rgb(150, 148, 148);
}
.video-carousel::-webkit-scrollbar-thumb
{
	border-radius: 10px;
	-webkit-box-shadow: inset 0 0 6px rgba(0,0,0,.3);
	background-color: #555;
}
#carousel-container .left-arrow {
  position: fixed; 
  z-index: 5000;
  left: 25px;
  top: 83%; 
  border-radius: 5px;
} 
#carousel-container .right-arrow {
  position: fixed;
  z-index: 5000;
  right: 25px;
  top: 83%; 
  border-radius: 5px;
}

 #carousel-container i {
  font-size: 24px;
  color: white;
}
#carousel-container i:hover {
  font-size: 28px;
  color: gray;
}
  .video-carousel .video {
    display: inline-block;
    margin: 0;
    align-self: auto;
    min-width: 170px;
    min-height: 85px;
    margin-right: 5px; 
  }
  .video-carousel .video img{
      width: 160px;
      height: 70px;
      transition: all .5s;
  }
  .video-carousel .video:hover img{
      width: 170px; 
      height: 75px;
      opacity: 0.5;
      transition: all .5s;
  }
  .video-carousel .video.current-video img{
      width: 170px; 
      height: 75px; 
      opacity: 0.5;
      transition: all .5s;
  }
  #playing-video {
    width: 100vh;
    height: 100vh;
  }
 
 
</style>
</head>
<body> 
    <div class="w3-top">
        <div class="w3-bar w3-white w3-opacity-max w3-card" id="myNavbar">
          <a href="#home" class="w3-bar-item w3-button w3-wide">Justin Hayes</a>
          <!-- Right-sided navbar links -->
          <div class="w3-right w3-hide-small">
            <a href="#about" class="w3-bar-item w3-button">ABOUT</a> 
            <a href="#work" class="w3-bar-item w3-button"><i class="fa fa-th"></i> WORK</a>
            <a href="#pricing" class="w3-bar-item w3-button"><i class="fa fa-usd"></i> PRICING</a>
            <a href="#contact" class="w3-bar-item w3-button"><i class="fa fa-envelope"></i> CONTACT</a>
          </div>
          <!-- Hide right-floated links on small screens and replace them with a menu icon -->
      
          <a href="javascript:void(0)" class="w3-bar-item w3-button w3-right w3-hide-large w3-hide-medium" onclick="w3_open()">
            <i class="fa fa-bars"></i>
          </a>
        </div>
      </div>
      <!-- Sidebar on small screens when clicking the menu icon -->
<nav class="w3-sidebar w3-bar-block w3-black w3-card w3-animate-left w3-hide-medium w3-hide-large" style="display:none" id="mySidebar">
    <a href="javascript:void(0)" onclick="w3_close()" class="w3-bar-item w3-button w3-large w3-padding-16">Close Ã—</a>
    <a href="#about" onclick="w3_close()" class="w3-bar-item w3-button">ABOUT</a> 
    <a href="#work" onclick="w3_close()" class="w3-bar-item w3-button">WORK</a>
    <a href="#pricing" onclick="w3_close()" class="w3-bar-item w3-button">PRICING</a>
    <a href="#contact" onclick="w3_close()" class="w3-bar-item w3-button">CONTACT</a>
  </nav>
  
  <!-- Header with full-height image -->
  <header class="bgimg-1 w3-container w3-grayscale-min" id="home">
    <div class="w3-display-left w3-text-white" style="padding:48px">
      <span class="w3-jumbo w3-hide-small">Saving the world one Video at the time</span><br>
      <span class="w3-xxlarge w3-hide-large w3-hide-medium">Saving the world one Video at the time</span><br>
      <span class="w3-large">I'm here to take your product to the next level!</span>
      <p><a href="#about" class="w3-button w3-white w3-padding-large w3-large w3-margin-top w3-opacity w3-hover-opacity-off mute">Learn more...</a></p>
    </div> 
    <div class="w3-display-bottomleft w3-text-grey w3-large" style="padding:24px 48px">
      <i class="fab fa-facebook-square w3-hover-opacity"></i>
      <i class="fab fa-instagram w3-hover-opacity"></i>
      <i class="fab fa-snapchat w3-hover-opacity"></i> 
      <i class="fab fa-linkedin w3-hover-opacity"></i>
    </div>
  </header>
  
  <!-- About Section -->
  <div class="w3-container" style="padding:128px 16px" id="about">
    <h3 class="w3-center">ABOUT ME</h3>
    <p class="w3-center w3-large">I Love taking your product to the next level!</p>
    <div class="w3-row-padding w3-center" style="margin-top:64px">
      <div class="w3-quarter">
        <i class="fas fa-user-clock w3-margin-bottom w3-jumbo w3-center"></i>
        <p class="w3-large">Timely</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore.</p>
      </div>
      <div class="w3-quarter">
        <i class="fa fa-heart w3-margin-bottom w3-jumbo"></i>
        <p class="w3-large">Passion</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore.</p>
      </div>
      <div class="w3-quarter">
        <i class="far fa-gem w3-margin-bottom w3-jumbo"></i>
        <p class="w3-large">Unique</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore.</p>
      </div>
      <div class="w3-quarter">
        <i class="fa fa-cog w3-margin-bottom w3-jumbo"></i>
        <p class="w3-large">Support</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore.</p>
      </div>
    </div>
  </div>
  
  <!-- Promo Section - "We know design" -->
  <div class="w3-container w3-light-grey" style="padding:128px 16px">
    <div class="w3-row-padding">
      <div class="w3-col m6">
        <h3>Not convinced? See my works below.</h3>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod<br>tempor incididunt ut labore et dolore.</p>
        <p><a href="#work" class="w3-button w3-black"><i class="fa fa-th"> </i> View recent videos</a></p>
      </div>
      <div class="w3-col m6">
        <img class="w3-image w3-round-large" src="https://assets.rocketstock.com/uploads/2016/09/Editing-Announcements-Feature-1000x576.jpg" alt="Buildings" width="700" height="394">
      </div>
    </div>
  </div>
  <div id="playing-video">

  </div>
  <div id="video-container">
      <div id="player"></div>
  </div>
  <div id="carousel-container"> 
      <i class="left-arrow fa fa-arrow-circle-left" aria-hidden="true"></i>
      <i class="right-arrow fa fa-arrow-circle-right" aria-hidden="true"></i>
      <div class="video-carousel">   
      
      </div>
  </div>
   
  
  <div class="controllers">
    <a href="#playing-video"><div class="control play">Play</div></a>
      <div class="control pause">Pause</div>
      <div class="control mute">Mute</div>
      <div class="control unmute">Unmute</div>
      <div class="control unmute">Full Screen</div>
  </div> 
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.10.2.min.js"><\/script>')</script>
  
  <!-- can load this via ajax if you prefer -->
  <script src="https://www.youtube.com/iframe_api"></script>

  <script>
      
    const ApiKey = "AIzaSyBixjWBDyoxDLLzEyCENCBT_vOHWKl7oXk";
    const playlistId = "PL0e4x1yOeQGK3U4r2zRlDdT_OW4J1LaGu";
    const URL = "https://www.googleapis.com/youtube/v3/playlistItems";
    let leftArrow = document.querySelector(".left-arrow"); 
    let rightArrow = document.querySelector(".right-arrow");
    let carousel = document.querySelector('.video-carousel');
     
    let videoContainer = document.querySelector('#video-container');
    let player;  
  
    //Puts video carousel slider at the back when clicked
    videoContainer.addEventListener('click', () => {
      console.log("body was clicked");
      videoContainer.style.zIndex = -99;
    });
  //Puts video carousel slider at the back when screen is scrolled
    document.addEventListener('scroll', () => {
      videoContainer.style.zIndex = -99;
    });

   
     
    //Toggles play/pause with space bar and left/right arrow controls
     function videoKeyDownControls(){
       //Space bar must be outside the function for it to work, not sure why yet...must research.
      let paused = true;
      document.addEventListener("keydown", (event) => {
        //If space bar (number 32) is clicked and pause is
        //TODO: Need to fix this so that when i click other buttons, it doesn't play the video
          if(event.which == 32){
            console.log("Space bar was clicked"); 
            if(paused){
            controlPause();
                paused = false; 
              } else { 
                controlPlay();
                paused = true; 
              }
          } else if(event.which == 37){
            //left arrow clicked
                console.log("left arrow was clicked");
                leftArrow.click();
          } else if(event.which == 39){
            //right arrow clicked
            rightArrow.click();
          } else {
            console.log(event.which);
          }
      }); 
     }
    function onYouTubeIframeAPIReady() {
        console.log('iFrame Ready');
        player = new YT.Player('player', { // player param is dom element id
            videoId: 'NmfzWpp0hMc', 
            playerVars: {
                controls: 0,
                rel: 0,
                showinfo: 0,
                modestbranding: true, // modestbranding conflicts with showinfo
                autoplay: 0
            },
            events: {
                'onReady': onPlayerReady,
                'onStateChange': onPlayerStateChange
            }
        });
    }
    function onPlayerReady(e) {
        console.log('ready');
        console.log(e);
         // // will autoplay
         e.target.playVideo();
        videoKeyDownControls();
        findCurrentVideo();
         
    }
    
    function findCurrentVideo(){ 
          //loops over each carousel item to see if it match current video being clicked.
         let currentVideo = 0;
        const carouselItems = document.querySelectorAll('.video-carousel .video');
          //Adds class to first div element generated from the loadVids() and youtube api
           carouselItems[currentVideo].classList.add("current-video");
          [...carouselItems].forEach((item, i) => { 
            item.addEventListener('click', function(e){
              // ensures that current video is resetted and represented correctly when clicked.
              currentVideo = i; 
              //toggles the style when image is clicked
              toggleVideoStyles();
              player.loadVideoById(`${item.id}`); 
            });               
    }); 
      //toggles video styles, removes and adds current-video class on current item
      function toggleVideoStyles(){
        carouselItems.forEach((item) => {
              if(carouselItems[currentVideo].id == item.id){
                item.classList.add("current-video");
              } else {
                item.classList.remove("current-video");
              }
            });
      }
    //TODO: Get left arrow and right arrow to take you to next/previous videos from the carousel
    function rightArrowChange(){
        if(currentVideo === 0){
              currentVideo = carouselItems.length;
            }
              currentVideo--;
            player.loadVideoById(`${carouselItems[currentVideo].id}`);   
            toggleVideoStyles(); 
        }
        function leftArrowChange(){
          if(currentVideo === carouselItems.length - 1){
                    currentVideo = 0;
                  }
            currentVideo++; 
              player.loadVideoById(`${carouselItems[currentVideo].id}`);
            toggleVideoStyles();   
          }       
       leftArrow.addEventListener("click", rightArrowChange);
   
       rightArrow.addEventListener("click", leftArrowChange);
    }
          
    
    function onPlayerStateChange(e) {
        console.log('on state change', e.data);
        //if videos is playing, add an event lister to hide the video container when scrolling
        if(e.data == 1){
          document.addEventListener('scroll', () => {
            videoContainer.style.zIndex = -99;
            console.log("scrolling from state");
          });
        } else {
          console.log('video is not playing');
        }
    }
    function controlPlay() {
        player.playVideo();
    }
    function controlPause() {
        player.pauseVideo();
    }
    function controlMute() {
        player.mute();
    }
    function controlUnmute() {
        player.unMute();
    } 

  //TODO: Convert all jquery functions to vanilla Js
    // function changeVideo(el) {   
        //Changes the video when the video is clicked
        // player.loadVideoById(`${el.id}`); 
        // console.log(el, "item was clicked");
      //    if(item.id == el.id){
      //    //Adds class on carousel item when clicked
      //    item.classList.add("current-video"); 
      // }  else {
      //   //Removed class on carousel item when clicked
      //   item.classList.remove("current-video"); 
      // }
    // }  
    // let play = document.querySelector('.play');
    // let pause =document.querySelector('.pause');
    // console.log(control);
    // control.addEventListener('click', (e) => e.preventDefault());
    // play.addEventListener('click', () => {
    //   controlPlay();
    //   carousel.style.display = "none";
    // });
      //Unnessary
      // $('.control').on('click', function(e){
      //      console.log(e.preventDefault());
      // });
      $('.control.play').on('click', function() {
          controlPlay();
          carousel.style.display = "none"; 
          videoContainer.style.zIndex = 2000;
      });
      $('.control.pause').on('click', function() {
          controlPause();
          carousel.style.display = "block"; 
          videoContainer.style.zIndex = -99; 
      });
      $('.control.mute').on('click', function() {
          controlMute();
      });
      $('.control.unmute').on('click', function() {
          controlUnmute();
      });
     
    
     
    var options = {
     part: 'snippet',
     key: ApiKey,
     maxResults: 20,
     playlistId: playlistId
 }
 loadVids();
 function loadVids() {
   //gets videos from youtube's api
     $.getJSON(URL, options, function (data) { 
         $.each(data.items, function (i, item) {
             
             
             let thumb = item.snippet.thumbnails.medium.url;
             let title = item.snippet.title;
             let desc = item.snippet.description.substring(0, 100);
             let vid = item.snippet.resourceId.videoId;  
            //  console.log(thumb); 
             let videoImg = document.querySelector('.video-carousel .video');
          
             carousel.innerHTML += `<div class="video"   id="${vid}"><a href="#playing-video"><img src="${thumb}"  alt="${desc}"/></a></div>`;
             
             });
     });
 }
 // Toggle between showing and hiding the sidebar when clicking the menu icon
var mySidebar = document.getElementById("mySidebar");

function w3_open() {
    if (mySidebar.style.display === 'block') {
        mySidebar.style.display = 'none';
    } else {
        mySidebar.style.display = 'block';
    }
}

// Close the sidebar with the close button
function w3_close() {
    mySidebar.style.display = "none";
}
   
  </script>
</body>
</html>
